<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Maintenance Mode (Comedy Edition)</title>
  <style>
    :root{
      --bg:#0b0f17;
      --card:rgba(255,255,255,.07);
      --card2:rgba(255,255,255,.05);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.68);
      --accent:#7c3aed;
      --accent2:#22c55e;
      --warn:#fde68a;
      --bad:#fca5a5;
      --shadow: 0 20px 60px rgba(0,0,0,.35);
      --radius: 18px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      background:
        radial-gradient(1200px 600px at 70% 20%, rgba(124,58,237,.18), transparent 60%),
        radial-gradient(900px 500px at 20% 80%, rgba(34,197,94,.12), transparent 60%),
        var(--bg);
      color:var(--text);
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Apple Color Emoji","Segoe UI Emoji";
      padding:24px;
    }
    .wrap{
      width:min(1100px, 100%);
      display:grid;
      gap:18px;
      grid-template-columns: 1.25fr .75fr;
    }
    @media (max-width: 980px){ .wrap{grid-template-columns:1fr} }

    .card{
      background:linear-gradient(180deg, var(--card), var(--card2));
      border:1px solid rgba(255,255,255,.10);
      border-radius:var(--radius);
      box-shadow:var(--shadow);
      overflow:hidden;
    }
    .pad{padding:18px 18px 14px}

    .top{
      display:flex;
      gap:12px;
      align-items:flex-start;
      justify-content:space-between;
      flex-wrap:wrap;
    }
    .title{
      font-size:clamp(22px, 3vw, 34px);
      line-height:1.1;
      margin:0;
      letter-spacing:-0.02em;
    }
    .subtitle{
      margin:8px 0 0;
      color:var(--muted);
      font-size:14px;
      line-height:1.5;
      max-width:70ch;
    }

    .pillrow{display:flex; gap:8px; flex-wrap:wrap; margin-top:12px}
    .pill{
      font-size:12px;
      color:rgba(255,255,255,.86);
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      padding:7px 10px;
      border-radius:999px;
      user-select:none;
      white-space:nowrap;
    }
    .pill b{color:white}

    .progress{
      margin-top:14px;
      height:10px;
      border-radius:999px;
      background:rgba(255,255,255,.08);
      overflow:hidden;
      border:1px solid rgba(255,255,255,.10);
    }
    .bar{
      height:100%;
      width:0%;
      border-radius:999px;
      background:linear-gradient(90deg, var(--accent), #3b82f6);
      transition:width .6s ease;
    }
    .small{
      margin:10px 0 0;
      color:var(--muted);
      font-size:12px;
      display:flex;
      justify-content:space-between;
      gap:10px;
      flex-wrap:wrap;
    }
    .small code{
      background:rgba(0,0,0,.25);
      padding:2px 6px;
      border-radius:8px;
      border:1px solid rgba(255,255,255,.10);
      color:rgba(255,255,255,.85);
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
    }

    /* Buttons */
    .btns{display:flex; gap:8px; flex-wrap:wrap; align-items:center}
    button{
      border:1px solid rgba(255,255,255,.14);
      background:rgba(255,255,255,.06);
      color:rgba(255,255,255,.92);
      padding:9px 12px;
      border-radius:12px;
      cursor:pointer;
      font-weight:700;
      font-size:13px;
    }
    button:hover{background:rgba(255,255,255,.10)}
    button:active{transform:translateY(1px)}
    .primary{
      background:rgba(124,58,237,.22);
      border-color:rgba(124,58,237,.45);
    }
    .danger{
      background:rgba(239,68,68,.18);
      border-color:rgba(239,68,68,.35);
    }

    /* Snake */
    canvas{
      width:100%;
      height:auto;
      display:block;
      background:rgba(0,0,0,.25);
    }
    .gameHeader{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap:10px;
      padding:14px 18px;
      border-top:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.18);
      flex-wrap:wrap;
    }
    .stats{display:flex; gap:12px; flex-wrap:wrap; font-size:12px; color:var(--muted)}
    .stats span{color:rgba(255,255,255,.85)}
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace;
      font-size: 12px;
      border:1px solid rgba(255,255,255,.18);
      background:rgba(255,255,255,.06);
      padding:2px 6px;
      border-radius:8px;
      color:rgba(255,255,255,.88);
    }

    /* Right column */
    .h2{margin:0 0 10px; font-size:16px; letter-spacing:-0.01em;}
    .log{
      border:1px dashed rgba(255,255,255,.16);
      border-radius:14px;
      padding:12px;
      background:rgba(0,0,0,.18);
      min-height:170px;
      font-size:13px;
      color:rgba(255,255,255,.86);
      line-height:1.5;
    }
    .log .muted{color:var(--muted)}
    .log .ok{color: #86efac}
    .log .warn{color: #fde68a}
    .log .nope{color: #fca5a5}

    .panel{
      margin-top:12px;
      padding:12px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.10);
      background:rgba(0,0,0,.12);
    }

    .meter{
      height:10px;
      border-radius:999px;
      background:rgba(255,255,255,.08);
      border:1px solid rgba(255,255,255,.10);
      overflow:hidden;
      margin-top:8px;
    }
    .meter > div{
      height:100%;
      width:0%;
      background:linear-gradient(90deg, #22c55e, #fde68a, #ef4444);
      transition:width .4s ease;
    }

    .bingo{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:8px;
      margin-top:10px;
    }
    .tile{
      padding:10px 10px;
      border-radius:14px;
      border:1px solid rgba(255,255,255,.12);
      background:rgba(255,255,255,.06);
      font-size:12px;
      cursor:pointer;
      user-select:none;
      line-height:1.2;
    }
    .tile.on{
      background:rgba(34,197,94,.18);
      border-color:rgba(34,197,94,.35);
    }
    .toast{
      position:fixed;
      left:50%;
      bottom:18px;
      transform:translateX(-50%);
      background:rgba(0,0,0,.65);
      border:1px solid rgba(255,255,255,.14);
      padding:10px 14px;
      border-radius:999px;
      box-shadow:var(--shadow);
      font-size:13px;
      color:rgba(255,255,255,.92);
      opacity:0;
      pointer-events:none;
      transition:opacity .25s ease, transform .25s ease;
    }
    .toast.show{
      opacity:1;
      transform:translateX(-50%) translateY(-4px);
    }

    .footer{
      margin-top:12px;
      font-size:12px;
      color:var(--muted);
    }
  </style>
</head>
<body>
  <div class="toast" id="toast"></div>

  <main class="wrap">
    <!-- Left -->
    <section class="card">
      <div class="pad">
        <div class="top">
          <div>
            <h1 class="title">Maintenance Mode üß∞ (but make it ‚ú®unserious‚ú®)</h1>
            <p class="subtitle">
              We‚Äôre upgrading the site. Translation: we touched one thing and now three unrelated things are emotionally damaged.
              <br><span class="muted">While we fix it, here‚Äôs a snake game so your procrastination feels premium.</span>
            </p>

            <div class="pillrow">
              <div class="pill">Status: <b id="statusText">Negotiating with the database</b></div>
              <div class="pill">Coffee: <b id="coffeeLevel">critical</b></div>
              <div class="pill">Bug count: <b id="bugCount">plotting</b></div>
              <div class="pill">Server mood: <b id="serverMood">moody</b></div>
            </div>

            <div class="progress" aria-label="fake progress bar">
              <div class="bar" id="progressBar"></div>
            </div>
            <div class="small">
              <span>Estimated completion: <code id="eta">soon‚Ñ¢</code></span>
              <span>Actual completion: <code id="truth">ask again later</code></span>
            </div>

            <div class="pillrow" style="margin-top:12px">
              <button class="danger" id="panicBtn">üö® PANIC BUTTON</button>
              <button id="blameBtn">üßæ Generate Blame</button>
              <button class="primary" id="deployBtn">üöÄ Deploy Now</button>
            </div>
          </div>

          <div class="panel" style="min-width:250px; flex:1">
            <div style="font-weight:800; letter-spacing:-0.01em">Rage Meter</div>
            <div class="footer">Increases when you die. Decreases when you touch grass.</div>
            <div class="meter"><div id="rageBar"></div></div>
            <div class="footer"><span id="rageLabel">Calm-ish.</span></div>
          </div>
        </div>
      </div>

      <canvas id="game" width="720" height="480"></canvas>

      <div class="gameHeader">
        <div class="stats">
          <div>Score: <span id="score">0</span></div>
          <div>Best: <span id="best">0</span></div>
          <div>Speed: <span id="speed">1.0x</span></div>
          <div class="muted">
            Controls: <span class="kbd">‚Üë</span><span class="kbd">‚Üì</span><span class="kbd">‚Üê</span><span class="kbd">‚Üí</span> /
            <span class="kbd">WASD</span> ‚Ä¢ Pause <span class="kbd">P</span>
          </div>
        </div>
        <div class="btns">
          <button class="primary" id="startBtn">Start / Restart</button>
          <button id="pauseBtn">Pause</button>
          <button id="hardBtn" title="For the brave (or the bored)">Hard Mode</button>
        </div>
      </div>
    </section>

    <!-- Right -->
    <aside class="card">
      <div class="pad">
        <h2 class="h2">Live Engineering Updates (100% not made up)</h2>
        <div class="log" id="log"></div>

        <div class="panel">
          <div style="font-weight:800">Developer Excuse Bingo</div>
          <div class="footer">Tap excuses until you get a BINGO. Yes, this is a real feature. No, it won‚Äôt fix the site.</div>
          <div class="bingo" id="bingo"></div>
          <div class="pillrow" style="margin-top:10px">
            <button id="resetBingo">Reset Bingo</button>
          </div>
        </div>

        <div class="footer">
          Emergency support: whisper ‚Äú<b>it worked on my machine</b>‚Äù three times into your router.
        </div>
      </div>
    </aside>
  </main>

  <script>
    // ---------------------------
    // Helpers
    // ---------------------------
    const $ = (id) => document.getElementById(id);
    const toast = $("toast");
    function showToast(msg){
      toast.textContent = msg;
      toast.classList.add("show");
      setTimeout(()=>toast.classList.remove("show"), 1600);
    }
    function randomPick(arr){ return arr[Math.floor(Math.random()*arr.length)]; }

    // ---------------------------
    // Funny maintenance fluff
    // ---------------------------
    const statusText = $("statusText");
    const coffeeLevel = $("coffeeLevel");
    const bugCount = $("bugCount");
    const serverMood = $("serverMood");
    const progressBar = $("progressBar");
    const eta = $("eta");
    const truth = $("truth");
    const logEl = $("log");

    function addLog(line, cls="muted"){
      const p = document.createElement("div");
      p.innerHTML = `<span class="${cls}">‚Ä¢ ${line}</span>`;
      logEl.prepend(p);
      while(logEl.childNodes.length > 12) logEl.removeChild(logEl.lastChild);
    }

    const statuses = [
      "Negotiating with the database",
      "Turning it off and on again (for spiritual reasons)",
      "Applying duct tape (digital edition)",
      "Reading the error message this time. Maybe.",
      "Updating dependencies (a.k.a. summoning chaos)",
      "Teaching the server empathy",
      "Refactoring (aka rearranging the deck chairs)",
      "Asking the API nicely"
    ];
    const coffees = ["critical", "low", "acceptable", "dangerously optimistic", "espresso-powered"];
    const bugs = ["plotting", "multiplying", "in witness protection", "too confident", "doing parkour"];
    const moods = ["moody", "confused", "surprisingly cooperative", "needs attention", "vibing"];

    let fakeProgress = 0;
    function tickMaintenance(){
      statusText.textContent = randomPick(statuses);
      coffeeLevel.textContent = randomPick(coffees);
      bugCount.textContent = randomPick(bugs);
      serverMood.textContent = randomPick(moods);

      const delta = (Math.random() * 10) - 3; // -3..7
      fakeProgress = Math.max(0, Math.min(97, fakeProgress + delta));
      progressBar.style.width = fakeProgress.toFixed(0) + "%";

      eta.textContent = randomPick(["soon‚Ñ¢", "in a sec", "after one more coffee", "shortly-ish", "when Mercury stops retrograding"]);
      truth.textContent = randomPick([
        "ask again later",
        "depends on the bug‚Äôs vibe",
        "classified information",
        "when JavaScript feels like it",
        "after we stop touching it"
      ]);

      const logLines = [
        ["Cleared cache. Cache cleared *us* emotionally.", "warn"],
        ["Found a bug. It had a family.", "warn"],
        ["Deployed a fix. Undeployed it for character development.", "nope"],
        ["Server replied: ‚Äòlol‚Äô. Investigating.", "warn"],
        ["Added console.log(). Problem got shy.", "ok"],
        ["Refactored code. Now it‚Äôs ‚Äòart‚Äô.", "ok"],
        ["Database requested boundaries. Respecting that.", "ok"],
        ["Reduced bugs by 0.3%. We take wins.", "muted"],
      ];
      const [line, cls] = randomPick(logLines);
      addLog(line, cls);
    }

    addLog("Booting maintenance mode‚Ä¶ please secure your snacks.", "ok");
    addLog("Loading comedy module‚Ä¶ done.", "ok");
    tickMaintenance();
    setInterval(tickMaintenance, 3200);

    // ---------------------------
    // Comedy buttons
    // ---------------------------
    $("panicBtn").addEventListener("click", ()=>{
      const msgs = [
        "Panic activated ‚úÖ Nothing changed ‚úÖ (as expected)",
        "Emergency meeting scheduled with the hamster running the server.",
        "You pressed PANIC. The site pressed PANIC back.",
        "We screamed internally. Thanks for your contribution."
      ];
      showToast(randomPick(msgs));
      addLog("PANIC BUTTON pressed. Confidence decreased by 14%.", "warn");
    });

    $("blameBtn").addEventListener("click", ()=>{
      const blame = [
        "Blame assigned to: Wi-Fi spirits.",
        "Blame assigned to: Mercury retrograde.",
        "Blame assigned to: the intern (we don‚Äôt have an intern).",
        "Blame assigned to: a missing semicolon living its best life.",
        "Blame assigned to: ‚Äòthat one plugin‚Äô nobody remembers installing.",
        "Blame assigned to: cosmic rays flipping a bit somewhere (probably).",
        "Blame assigned to: user error (respectfully)."
      ];
      const msg = randomPick(blame);
      showToast(msg);
      addLog(msg, "warn");
    });

    $("deployBtn").addEventListener("click", ()=>{
      const steps = [
        ["Starting deployment‚Ä¶", "ok"],
        ["Packing pixels into boxes‚Ä¶", "ok"],
        ["Launching rocket üöÄ ‚Ä¶", "ok"],
        ["Rocket has feelings. Comforting rocket‚Ä¶", "warn"],
        ["Deployment complete ‚úÖ", "ok"],
        ["Site status: still maintenance üíÄ", "nope"]
      ];
      showToast("Deploying‚Ä¶ (dramatic music)");
      let i = 0;
      const t = setInterval(()=>{
        addLog(steps[i][0], steps[i][1]);
        i++;
        if(i >= steps.length) clearInterval(t);
      }, 450);
    });

    // ---------------------------
    // Bingo
    // ---------------------------
    const excuses = [
      "It works on my machine",
      "DNS is haunted",
      "Caching issue (trust me)",
      "We‚Äôre ‚Äòoptimizing‚Äô",
      "A ‚Äòquick‚Äô hotfix",
      "Third-party API changed",
      "We‚Äôre ‚Äòmigrating‚Äô stuff",
      "Someone pushed to main",
      "It‚Äôs a feature",
    ];

    const bingoEl = $("bingo");
    function renderBingo(){
      bingoEl.innerHTML = "";
      excuses.forEach((t, idx)=>{
        const d = document.createElement("div");
        d.className = "tile";
        d.textContent = t;
        d.addEventListener("click", ()=>{
          d.classList.toggle("on");
          checkBingo();
        });
        bingoEl.appendChild(d);
      });
    }

    function checkBingo(){
      const tiles = [...bingoEl.querySelectorAll(".tile")];
      const on = tiles.map(t=>t.classList.contains("on"));

      const lines = [
        [0,1,2],[3,4,5],[6,7,8],
        [0,3,6],[1,4,7],[2,5,8],
        [0,4,8],[2,4,6]
      ];
      const bingo = lines.some(line => line.every(i => on[i]));
      if(bingo){
        showToast("BINGO! You have unlocked: absolutely nothing üèÜ");
        addLog("BINGO achieved. Still not fixing the site though.", "ok");
      }
    }

    $("resetBingo").addEventListener("click", ()=>{
      renderBingo();
      showToast("Bingo reset. Lies reloaded.");
      addLog("Excuse Bingo reset. Accountability avoided.", "muted");
    });

    renderBingo();

    // ---------------------------
    // Snake Game
    // ---------------------------
    const canvas = $("game");
    const ctx = canvas.getContext("2d");

    const scoreEl = $("score");
    const bestEl  = $("best");
    const speedEl = $("speed");

    const startBtn = $("startBtn");
    const pauseBtn = $("pauseBtn");
    const hardBtn  = $("hardBtn");

    const rageBar = $("rageBar");
    const rageLabel = $("rageLabel");
    let rage = 5; // 0..100

    function setRage(n){
      rage = Math.max(0, Math.min(100, n));
      rageBar.style.width = rage + "%";
      rageLabel.textContent =
        rage < 15 ? "Calm-ish." :
        rage < 35 ? "Mildly annoyed (British level)." :
        rage < 60 ? "Spicy frustration." :
        rage < 85 ? "Keyboard looking throwable." :
        "Full gamer rage. Drink water.";
    }

    // Rage naturally cools down
    setRage(rage);
    setInterval(()=> setRage(rage - 1), 3500);

    const GRID = 24;
    const COLS = Math.floor(canvas.width / GRID);
    const ROWS = Math.floor(canvas.height / GRID);

    const STORAGE_KEY = "maintenance_snake_best";
    let best = Number(localStorage.getItem(STORAGE_KEY) || 0);
    bestEl.textContent = best;

    let snake, dir, nextDir, food, score, running, paused, tickMs, hardMode;

    function resetGame(){
      snake = [{x: Math.floor(COLS/2), y: Math.floor(ROWS/2)}];
      dir = {x: 1, y: 0};
      nextDir = {x: 1, y: 0};
      score = 0;
      running = true;
      paused = false;
      tickMs = hardMode ? 85 : 120;
      placeFood();
      scoreEl.textContent = score;
      updateSpeedLabel();
      addLog(hardMode ? "Hard mode enabled. Reflexes required." : "Snake restarted. Productivity paused.", "ok");
    }

    function updateSpeedLabel(){
      const base = 120;
      const mult = (base / tickMs);
      speedEl.textContent = mult.toFixed(1) + "x";
    }

    function placeFood(){
      while(true){
        const fx = Math.floor(Math.random()*COLS);
        const fy = Math.floor(Math.random()*ROWS);
        if(!snake.some(s=>s.x===fx && s.y===fy)){
          food = {x: fx, y: fy};
          return;
        }
      }
    }

    function overlayText(big, small){
      ctx.save();
      ctx.globalAlpha = 0.85;
      ctx.fillRect(0,0,canvas.width,canvas.height);
      ctx.globalAlpha = 1;
      ctx.fillStyle = "white";
      ctx.font = "800 42px system-ui, sans-serif";
      ctx.textAlign = "center";
      ctx.fillText(big, canvas.width/2, canvas.height/2 - 10);
      ctx.font = "500 16px system-ui, sans-serif";
      ctx.fillText(small, canvas.width/2, canvas.height/2 + 24);
      ctx.restore();
    }

    function draw(){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      // grid (subtle)
      ctx.globalAlpha = 0.18;
      for(let x=0;x<=COLS;x++){
        ctx.beginPath(); ctx.moveTo(x*GRID,0); ctx.lineTo(x*GRID,canvas.height); ctx.stroke();
      }
      for(let y=0;y<=ROWS;y++){
        ctx.beginPath(); ctx.moveTo(0,y*GRID); ctx.lineTo(canvas.width,y*GRID); ctx.stroke();
      }
      ctx.globalAlpha = 1;

      // food
      ctx.fillRect(food.x*GRID+4, food.y*GRID+4, GRID-8, GRID-8);

      // snake
      snake.forEach((s,i)=>{
        const pad = i===0 ? 3 : 5;
        ctx.fillRect(s.x*GRID+pad, s.y*GRID+pad, GRID-(pad*2), GRID-(pad*2));
      });

      if(!running){
        overlayText("Game over üíÄ", "Press Start / Restart");
      } else if(paused){
        overlayText("Paused ‚è∏", "Press P or Pause");
      }
    }

    function step(){
      if(!running || paused) return;

      dir = nextDir;
      const head = snake[0];
      const newHead = {x: head.x + dir.x, y: head.y + dir.y};

      // wall collision
      if(newHead.x < 0 || newHead.x >= COLS || newHead.y < 0 || newHead.y >= ROWS){
        die("Snake tried to leave. Same, honestly.");
        return;
      }

      // self collision
      if(snake.some(s => s.x === newHead.x && s.y === newHead.y)){
        die("Snake got philosophical and ate itself.");
        return;
      }

      snake.unshift(newHead);

      // eat
      if(newHead.x === food.x && newHead.y === food.y){
        score++;
        scoreEl.textContent = score;

        if(score % 4 === 0){
          tickMs = Math.max(55, tickMs - (hardMode ? 6 : 4));
          updateSpeedLabel();
        }

        if(score > best){
          best = score;
          localStorage.setItem(STORAGE_KEY, String(best));
          bestEl.textContent = best;
          showToast("New best! Your procrastination is evolving.");
        }

        placeFood();
        addLog(randomPick([
          "Snack acquired. Performance review pending.",
          "Apple defeated. Again.",
          "Crunchy pixels consumed successfully.",
          "The snake approves your life choices (for now)."
        ]), "ok");
      } else {
        snake.pop();
      }
    }

    function die(message){
      running = false;
      setRage(rage + 18);
      addLog(message, "nope");
      addLog("Maintenance tip: stare at the bug until it feels guilty.", "warn");
      showToast("Oof. Rage meter increased.");
    }

    function setDirection(x,y){
      if((dir.x === 1 && x === -1) || (dir.x === -1 && x === 1) ||
         (dir.y === 1 && y === -1) || (dir.y === -1 && y === 1)) return;
      nextDir = {x,y};
    }

    window.addEventListener("keydown", (e)=>{
      const k = e.key.toLowerCase();
      if(k === "arrowup" || k === "w") setDirection(0,-1);
      if(k === "arrowdown" || k === "s") setDirection(0,1);
      if(k === "arrowleft" || k === "a") setDirection(-1,0);
      if(k === "arrowright" || k === "d") setDirection(1,0);
      if(k === "p") togglePause();
    });

    function togglePause(){
      if(!running) return;
      paused = !paused;
      addLog(paused ? "Paused. Look busy." : "Unpaused. Back to snake business.", paused ? "warn" : "ok");
      draw();
    }

    startBtn.addEventListener("click", ()=>{ resetGame(); draw(); });
    pauseBtn.addEventListener("click", togglePause);

    hardBtn.addEventListener("click", ()=>{
      hardMode = !hardMode;
      hardBtn.classList.toggle("primary", hardMode);
      showToast(hardMode ? "Hard mode ON üòà" : "Hard mode OFF üòå");
      resetGame(); draw();
    });

    // Start loop
    hardMode = false;
    resetGame(); draw();

    let last = performance.now();
    function loop(now){
      const elapsed = now - last;
      if(elapsed >= tickMs){
        last = now;
        step();
        draw();
      }
      requestAnimationFrame(loop);
    }
    requestAnimationFrame(loop);
  </script>
</body>
</html>
