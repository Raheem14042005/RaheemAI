<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Raheem AI | Construction Compliance Intelligence</title>

  <style>
    :root{
      --bg0:#050913;
      --bg1:#071225;
      --bg2:#0a1a33;

      --surface: rgba(255,255,255,.06);
      --surface2: rgba(255,255,255,.08);
      --surface3: rgba(255,255,255,.10);
      --border: rgba(255,255,255,.14);

      --text:#eaf2ff;
      --muted: rgba(234,242,255,.82);
      --muted2: rgba(234,242,255,.62);

      --p1:#2563eb;
      --p2:#38bdf8;
      --p3:#22d3ee;

      --ok:#22c55e;
      --warn:#f59e0b;

      --shadow: 0 18px 42px rgba(0,0,0,.52);
      --shadow2: 0 12px 26px rgba(0,0,0,.40);

      --r:18px;
      --r2:14px;

      --font: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, Arial, sans-serif;
    }

    *{ box-sizing:border-box; }
    html,body{ height:100%; }

    body{
      margin:0;
      font-family: var(--font);
      color: var(--text);
      background:
        radial-gradient(1100px 520px at 12% 10%, rgba(56,189,248,.18) 0%, rgba(56,189,248,0) 60%),
        radial-gradient(1000px 520px at 88% 16%, rgba(37,99,235,.22) 0%, rgba(37,99,235,0) 58%),
        radial-gradient(900px 520px at 55% 100%, rgba(34,211,238,.12) 0%, rgba(34,211,238,0) 60%),
        linear-gradient(180deg, var(--bg0) 0%, var(--bg1) 30%, var(--bg2) 100%);
      overflow-x:hidden;
    }

    /* Alive background: subtle drift grid */
    body::before{
      content:"";
      position: fixed;
      inset:0;
      pointer-events:none;
      opacity:.10;
      background-image:
        linear-gradient(to right, rgba(56,189,248,.15) 1px, transparent 1px),
        linear-gradient(to bottom, rgba(56,189,248,.12) 1px, transparent 1px);
      background-size: 64px 64px;
      mask-image: radial-gradient(circle at 30% 10%, rgba(0,0,0,1), rgba(0,0,0,0) 65%);
      animation: gridDrift 18s linear infinite;
      z-index: 0;
    }

    @keyframes gridDrift{
      0%{ background-position: 0 0, 0 0; }
      100%{ background-position: 140px 70px, 70px 140px; }
    }

    /* Premium motion: soft aurora blobs (slow, professional) */
    body::after{
      content:"";
      position: fixed;
      inset:-40vh -40vw;
      pointer-events:none;
      background:
        radial-gradient(closest-side at 18% 30%, rgba(56,189,248,.12), rgba(56,189,248,0) 60%),
        radial-gradient(closest-side at 82% 18%, rgba(37,99,235,.14), rgba(37,99,235,0) 62%),
        radial-gradient(closest-side at 55% 86%, rgba(34,211,238,.10), rgba(34,211,238,0) 60%);
      filter: blur(10px);
      opacity: .90;
      animation: auroraDrift 26s ease-in-out infinite;
      z-index: 0;
    }

    @keyframes auroraDrift{
      0%,100%{ transform: translate3d(0,0,0) scale(1); }
      50%{ transform: translate3d(3vw,-2vh,0) scale(1.03); }
    }

    .app{
      display:grid;
      grid-template-columns: 340px 1fr;
      min-height:100vh;
      position: relative;
      z-index: 1;
    }
    @media (max-width: 980px){
      .app{ grid-template-columns: 1fr; }
      .sidebar{
        position: sticky; top:0; z-index:50;
        border-radius: 0 0 var(--r) var(--r);
      }
    }

    /* Sidebar */
    .sidebar{
      background: rgba(6,12,26,.84);
      border-right: 1px solid rgba(255,255,255,.08);
      backdrop-filter: blur(12px);
      padding: 18px;
      position: relative;
      overflow:hidden;
      z-index: 1;
    }
    .sidebar::after{
      content:"";
      position:absolute;
      inset:-140px -140px auto auto;
      width: 320px; height: 320px;
      background: radial-gradient(circle, rgba(56,189,248,.22), rgba(56,189,248,0) 65%);
      pointer-events:none;
      transform: translate(40px,-40px);
    }

    /* Brand */
    .brand{
      display:flex; align-items:center; gap:12px;
      padding: 10px 10px 14px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      margin-bottom: 14px;
      position:relative;
      z-index:1;
    }

    /* Premium mark */
    .logo{
      width:46px; height:46px;
      border-radius: 16px;
      display:flex; align-items:center; justify-content:center;
      border: 1px solid rgba(255,255,255,.18);
      background:
        radial-gradient(circle at 30% 30%, rgba(255,255,255,.20), rgba(255,255,255,0) 60%),
        linear-gradient(135deg, rgba(56,189,248,.95), rgba(37,99,235,.95));
      box-shadow: 0 18px 40px rgba(56,189,248,.18);
      overflow:hidden;
      user-select:none;
      position:relative;
      animation: logoGlow 3.8s ease-in-out infinite;
    }
    @keyframes logoGlow{
      0%,100%{ box-shadow: 0 18px 40px rgba(56,189,248,.18); }
      50%{ box-shadow: 0 22px 56px rgba(34,211,238,.22); }
    }
    .logo svg{ width:34px; height:34px; }
    .logo::after{
      content:"";
      position:absolute;
      inset:-90px auto auto -90px;
      width:200px; height:200px;
      background: radial-gradient(circle, rgba(34,211,238,.24), rgba(34,211,238,0) 62%);
      transform: rotate(16deg);
      pointer-events:none;
    }

    .brand h1{
      margin:0;
      font-size: 16px;
      letter-spacing: .2px;
      line-height:1.1;
      font-weight: 800;
    }
    .brand p{
      margin:4px 0 0;
      font-size: 12px;
      color: var(--muted);
    }
    .brand .tagline{
      font-size: 11px;
      color: var(--muted2);
      margin-top: 4px;
      line-height: 1.25;
    }

    .pill{
      font-size: 11px;
      padding: 4px 9px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: rgba(234,242,255,.70);
      user-select:none;
      white-space: nowrap;
    }
    .pill.live{
      border-color: rgba(34,197,94,.40);
      color: #ccffe0;
      background: rgba(34,197,94,.12);
    }
    .pill.brand{
      border-color: rgba(34,211,238,.40);
      color: #d7fbff;
      background: rgba(34,211,238,.10);
    }

    /* Document selection */
    .doc-panel{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.07);
      border-radius: var(--r2);
      padding: 12px;
      margin-bottom: 14px;
      position:relative;
      z-index:1;
    }
    .doc-head{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
    }
    .doc-title{
      margin:0;
      font-size: 12px;
      letter-spacing: .9px;
      text-transform: uppercase;
      color: rgba(234,242,255,.86);
      font-weight: 900;
    }
    .doc-sub{
      margin:6px 0 0;
      font-size: 12px;
      color: rgba(234,242,255,.64);
      line-height: 1.35;
    }

    .field{ margin-top: 10px; }
    .label{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      font-size: 11px;
      color: rgba(234,242,255,.80);
      margin-bottom: 6px;
      letter-spacing: .2px;
      font-weight: 900;
    }

    .input, select{
      width:100%;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(3,7,16,.86);
      color: var(--text);
      padding: 11px 12px;
      font-size: 13px;
      font-weight: 780;
      outline:none;
    }
    .input::placeholder{ color: rgba(234,242,255,.55); }
    .input:focus, select:focus{
      outline: 3px solid rgba(56,189,248,.22);
      outline-offset: 2px;
    }
    select option{
      background: #0b1428;
      color: #eaf2ff;
    }

    .doc-badge-row{
      display:flex; gap:8px; flex-wrap:wrap;
      margin-top: 10px;
      align-items:center;
    }
    .mini{
      font-size: 11px;
      color: rgba(234,242,255,.74);
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.12);
      padding: 6px 10px;
      border-radius: 999px;
      display:inline-flex;
      gap:8px;
      align-items:center;
    }
    .mini .dot{
      width:8px; height:8px; border-radius:50%;
      background: rgba(234,242,255,.35);
    }
    .mini.ok .dot{
      background: var(--ok);
      box-shadow: 0 0 0 4px rgba(34,197,94,.12);
    }
    .mini.warn .dot{
      background: var(--warn);
      box-shadow: 0 0 0 4px rgba(245,158,11,.12);
    }

    /* Nav */
    .nav{
      display:flex;
      flex-direction:column;
      gap: 8px;
      margin-top: 10px;
      position:relative;
      z-index:1;
    }
    .nav button{
      width:100%;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.06);
      color: var(--text);
      border-radius: 14px;
      padding: 11px 12px;
      text-align:left;
      cursor:pointer;
      font-weight: 900;
      font-size: 13px;
      display:flex; align-items:center; justify-content:space-between;
      transition: transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
    }
    .nav button:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.09);
      border-color: rgba(56,189,248,.24);
      box-shadow: 0 10px 26px rgba(0,0,0,.22);
    }
    .nav button.active{
      border-color: rgba(56,189,248,.40);
      background: rgba(255,255,255,.10);
    }

    /* Content */
    .content{ padding: 18px 22px 40px; position: relative; z-index: 1; }

    /* Topbar */
    .topbar{
      display:flex;
      align-items:stretch;
      justify-content:space-between;
      gap: 14px;
      margin-bottom: 14px;
    }
    @media (max-width: 980px){
      .topbar{ flex-direction: column; }
      .auth-top{ width: 100% !important; min-width: unset !important; }
    }

    .hero{
      flex:1;
      border: 1px solid rgba(255,255,255,.12);
      background: linear-gradient(180deg, rgba(255,255,255,.075), rgba(255,255,255,.045));
      border-radius: var(--r);
      padding: 18px;
      box-shadow: 0 1px 0 rgba(255,255,255,.02);
      position:relative;
      overflow:hidden;
    }
    .hero::after{
      content:"";
      position:absolute;
      inset:auto -120px -120px auto;
      width: 340px; height: 340px;
      background: radial-gradient(circle, rgba(37,99,235,.22), rgba(37,99,235,0) 65%);
      pointer-events:none;
      animation: sweep 8s ease-in-out infinite;
    }
    @keyframes sweep{
      0%,100%{ transform: translate(0,0); opacity:.95; }
      50%{ transform: translate(-18px,-10px); opacity:.78; }
    }

    .hero h2{
      margin:0;
      font-size: 22px;
      letter-spacing:.1px;
      display:flex;
      align-items:center;
      gap: 10px;
      font-weight: 900;
    }
    .hero p{
      margin: 10px 0 0;
      color: rgba(234,242,255,.82);
      font-size: 13px;
      max-width: 980px;
      line-height: 1.55;
    }
    .quote{
      margin-top: 12px;
      padding: 10px 12px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(3,7,16,.55);
      border-radius: 14px;
      color: rgba(234,242,255,.74);
      font-size: 12px;
      font-style: italic;
      max-width: 980px;
    }

    /* Login at top */
    .auth-top{
      width: 250px;
      min-width: 230px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      border-radius: var(--r);
      padding: 14px;
      box-shadow: 0 1px 0 rgba(255,255,255,.02);
      position:relative;
      overflow:hidden;
    }
    .auth-top::after{
      content:"";
      position:absolute;
      inset:-130px auto auto -130px;
      width: 320px; height: 320px;
      background: radial-gradient(circle, rgba(56,189,248,.16), rgba(56,189,248,0) 65%);
      pointer-events:none;
    }
    .auth-title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      margin-bottom: 10px;
      position:relative;
      z-index:1;
    }
    .auth-title span{
      font-size: 12px;
      color: rgba(234,242,255,.84);
      font-weight: 950;
      letter-spacing: .2px;
    }

    .btn{
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.07);
      color: var(--text);
      padding: 10px 12px;
      border-radius: 14px;
      font-weight: 950;
      font-size: 13px;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease, box-shadow .12s ease;
      display:inline-flex;
      align-items:center;
      gap: 8px;
      position:relative;
      z-index:1;
    }
    .btn:hover{
      transform: translateY(-1px);
      background: rgba(255,255,255,.10);
      border-color: rgba(56,189,248,.24);
      box-shadow: 0 10px 24px rgba(0,0,0,.22);
    }
    .btn:focus{ outline: 3px solid rgba(56,189,248,.20); outline-offset: 2px; }

    .btn.primary{
      background: linear-gradient(135deg, rgba(34,211,238,.96), rgba(37,99,235,.96));
      border-color: rgba(56,189,248,.38);
    }
    .btn.small{
      padding: 9px 10px;
      font-size: 12px;
      border-radius: 12px;
      width: 100%;
      justify-content:center;
    }
    .google-badge{
      width: 18px; height: 18px;
      border-radius: 7px;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(3,7,16,.50);
      font-weight: 950;
      font-size: 12px;
    }
    .auth-hint{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(234,242,255,.62);
      line-height: 1.45;
      position:relative;
      z-index:1;
    }

    /* Section */
    .section-title{
      display:flex;
      align-items:center;
      justify-content:space-between;
      margin: 16px 0 10px;
    }
    .section-title h3{
      margin:0;
      font-size: 12px;
      color: rgba(234,242,255,.70);
      text-transform: uppercase;
      letter-spacing: 1.2px;
    }

    .grid{
      display:grid;
      grid-template-columns: repeat(1, minmax(0, 1fr));
      gap: 14px;
    }
    @media (min-width: 760px){
      .grid{ grid-template-columns: repeat(2, minmax(0,1fr)); gap: 16px; }
    }
    @media (min-width: 1200px){
      .grid{ grid-template-columns: repeat(3, minmax(0,1fr)); gap: 18px; }
    }

    .card{
      border-radius: var(--r);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      box-shadow: 0 1px 0 rgba(255,255,255,.02);
      padding: 16px;
      min-height: 190px;
      display:flex;
      flex-direction:column;
      overflow:hidden;
      position:relative;
      transition: transform .14s ease, box-shadow .14s ease, border-color .14s ease, background .14s ease;
    }
    .card::after{
      content:"";
      position:absolute;
      width: 240px; height: 240px;
      border-radius: 999px;
      top:-130px; right:-130px;
      background: radial-gradient(circle, rgba(56,189,248,.16), rgba(56,189,248,0) 65%);
      pointer-events:none;
    }
    .card:hover{
      transform: translateY(-2px);
      box-shadow: var(--shadow);
      border-color: rgba(56,189,248,.40);
      background: rgba(255,255,255,.09);
    }

    .card-head{
      display:flex; justify-content:space-between; align-items:flex-start; gap: 10px;
      margin-bottom: 10px;
    }
    .card-title{
      display:flex; gap: 10px; align-items:center;
    }

    .icon{
      width: 44px; height: 44px; border-radius: 16px;
      display:flex; align-items:center; justify-content:center;
      color: white;
      font-weight: 950;
      box-shadow: 0 14px 30px rgba(0,0,0,.35);
      user-select:none;
      border: 1px solid rgba(255,255,255,.14);
    }
    .i-live{ background: linear-gradient(135deg, rgba(34,211,238,.95), rgba(37,99,235,.95)); }
    .i-early{ background: linear-gradient(135deg, rgba(56,189,248,.92), rgba(34,211,238,.92)); }
    .i-report{ background: linear-gradient(135deg, rgba(37,99,235,.90), rgba(34,211,238,.80)); }
    .i-bim{ background: linear-gradient(135deg, rgba(29,78,216,.92), rgba(37,99,235,.92)); }
    .i-ber{ background: linear-gradient(135deg, rgba(34,211,238,.86), rgba(56,189,248,.92)); }
    .i-products{ background: linear-gradient(135deg, rgba(56,189,248,.92), rgba(34,211,238,.86)); }

    .card h4{ margin:0; font-size: 16px; letter-spacing: .1px; }
    .card p{ margin: 6px 0 0; color: rgba(234,242,255,.76); font-size: 13px; line-height:1.5; }

    .cta{
      margin-top:auto;
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 10px;
      padding-top: 12px;
    }

    /* Views */
    .view{ display:none; }
    .view.active{ display:block; }

    /* Chat */
    .chat-shell{
      border-radius: var(--r);
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      box-shadow: var(--shadow2);
      overflow:hidden;
    }
    .chat-top{
      display:flex; align-items:center; justify-content:space-between;
      padding: 14px 14px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: rgba(6,12,26,.45);
      backdrop-filter: blur(10px);
    }
    .chat-top strong{ font-size: 14px; }
    .chat-top span{ font-size: 12px; color: rgba(234,242,255,.70); }

    .chat-help{
      padding: 14px;
      border-bottom: 1px solid rgba(255,255,255,.08);
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
    }
    .chip{
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      color: var(--text);
      padding: 9px 10px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 950;
      cursor:pointer;
      transition: transform .12s ease, background .12s ease, border-color .12s ease;
    }
    .chip:hover{ transform: translateY(-1px); background: rgba(255,255,255,.10); border-color: rgba(56,189,248,.22); }

    .chat-log{
      height: 60vh;
      overflow-y:auto;
      padding: 14px;
      background:
        radial-gradient(900px 480px at 20% 0%, rgba(37,99,235,.14), rgba(37,99,235,0) 60%),
        radial-gradient(900px 480px at 90% 10%, rgba(56,189,248,.10), rgba(56,189,248,0) 55%),
        rgba(0,0,0,.10);
    }
    .msg{ display:flex; margin-bottom: 12px; }
    .msg.user{ justify-content:flex-end; }

    .bubble{
      max-width: min(780px, 92%);
      padding: 10px 12px;
      border-radius: 16px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(255,255,255,.06);
      box-shadow: 0 1px 0 rgba(255,255,255,.03);
      font-size: 13px;
      line-height: 1.55;
      white-space: pre-wrap;
    }
    .msg.user .bubble{
      background: linear-gradient(135deg, rgba(34,211,238,.92), rgba(37,99,235,.92));
      border-color: rgba(56,189,248,.28);
    }

    .meta{
      font-size: 11px;
      color: rgba(234,242,255,.55);
      margin-top: 6px;
    }
    .msg.user .meta{ text-align:right; }

    /* Typing indicator (professional) */
    .typing{
      display:inline-flex;
      align-items:center;
      gap: 6px;
      color: rgba(234,242,255,.70);
    }
    .dots{
      display:inline-flex;
      gap: 4px;
      transform: translateY(1px);
    }
    .dots span{
      width: 6px; height: 6px;
      border-radius: 99px;
      background: rgba(234,242,255,.42);
      animation: dot 1.2s infinite ease-in-out;
    }
    .dots span:nth-child(2){ animation-delay: .15s; }
    .dots span:nth-child(3){ animation-delay: .30s; }
    @keyframes dot{
      0%,100%{ opacity:.35; transform: translateY(0); }
      50%{ opacity:1; transform: translateY(-2px); }
    }

    .chat-input{
      display:flex;
      gap: 10px;
      align-items:flex-end;
      padding: 12px;
      border-top: 1px solid rgba(255,255,255,.10);
      background: rgba(6,12,26,.55);
      backdrop-filter: blur(10px);
      position: sticky;
      bottom: 0;
    }
    textarea{
      width:100%;
      min-height: 46px;
      max-height: 160px;
      resize:none;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.12);
      background: rgba(3,7,16,.86);
      color: var(--text);
      font-family: var(--font);
      font-size: 13px;
      padding: 10px 12px;
      line-height: 1.35;
    }
    textarea::placeholder{ color: rgba(234,242,255,.55); }
    textarea:focus{ outline: 3px solid rgba(56,189,248,.22); outline-offset: 2px; }

    /* Modal */
    .modal-backdrop{
      position: fixed;
      inset: 0;
      display:none;
      align-items:center;
      justify-content:center;
      padding: 18px;
      background: rgba(0,0,0,.55);
      z-index: 999;
    }
    .modal-backdrop.show{ display:flex; }
    .modal{
      width: min(560px, 100%);
      border-radius: var(--r);
      border: 1px solid rgba(255,255,255,.14);
      background: rgba(6,12,26,.88);
      backdrop-filter: blur(12px);
      box-shadow: var(--shadow);
      padding: 16px;
    }
    .modal h3{ margin:0 0 6px; font-size: 15px; }
    .modal p{ margin:0 0 14px; color: rgba(234,242,255,.74); font-size: 13px; line-height: 1.55; }

    /* Footer */
    .footer{
      margin-top: 16px;
      padding: 14px 4px 0;
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      color: rgba(234,242,255,.62);
      font-size: 12px;
      flex-wrap: wrap;
    }
    .footer-left{
      display:flex;
      align-items:center;
      gap: 10px;
      flex-wrap: wrap;
    }
    .sep{
      width: 6px; height: 6px;
      border-radius: 99px;
      background: rgba(56,189,248,.35);
      box-shadow: 0 0 0 4px rgba(56,189,248,.10);
    }
    .footer-quote{
      color: rgba(234,242,255,.62);
      font-style: italic;
    }
  </style>
</head>

<body>
  <div class="app">
    <!-- SIDEBAR -->
    <aside class="sidebar">
      <div class="brand">
        <div class="logo" aria-label="Raheem AI logo">
          <svg viewBox="0 0 48 48" fill="none" aria-hidden="true" xmlns="http://www.w3.org/2000/svg">
            <rect x="7" y="7" width="34" height="34" rx="7" stroke="rgba(255,255,255,.92)" stroke-width="2"/>
            <path d="M15 16H30V30H22.5C18.9 30 16 27.1 16 23.5V16Z" stroke="rgba(255,255,255,.88)" stroke-width="2"/>
            <path d="M22.5 30V35" stroke="rgba(255,255,255,.88)" stroke-width="2" stroke-linecap="round"/>
            <path d="M13 24H20" stroke="rgba(255,255,255,.40)" stroke-width="1.6" stroke-linecap="round"/>
            <path d="M13 20H20" stroke="rgba(255,255,255,.40)" stroke-width="1.6" stroke-linecap="round"/>
            <path d="M13 28H20" stroke="rgba(255,255,255,.40)" stroke-width="1.6" stroke-linecap="round"/>
            <path d="M30.5 19.5L34 23" stroke="rgba(255,255,255,.96)" stroke-width="2.6" stroke-linecap="round"/>
            <path d="M34 23L40 17" stroke="rgba(255,255,255,.96)" stroke-width="2.6" stroke-linecap="round"/>
          </svg>
        </div>
        <div>
          <h1>Raheem AI</h1>
          <p>Construction Compliance Intelligence</p>
          <div class="tagline">Clear guidance based on your selected Technical Guidance Document, with references to support professional review.</div>
        </div>
      </div>

      <div class="doc-panel">
        <div class="doc-head">
          <div>
            <div class="doc-title">Active Document</div>
            <div class="doc-sub">Choose the document Raheem AI should use for this conversation.</div>
          </div>
          <span class="pill brand" id="pdfCount">Documents: 0</span>
        </div>

        <div class="field">
          <label class="label" for="pdfSearch">
            Search documents
            <span class="pill" id="lastSync">Updated just now</span>
          </label>
          <input id="pdfSearch" class="input" type="text" placeholder="Type to filter..." />
        </div>

        <div class="field">
          <label class="label" for="pdfSelect">Choose document</label>
          <select id="pdfSelect">
            <option value="">Loading documents...</option>
          </select>
        </div>

        <div class="doc-badge-row">
          <span class="mini warn" id="serviceStatus"><span class="dot"></span>Connecting</span>
          <span class="mini" id="activeDocPill"><span class="dot"></span>No document selected</span>
        </div>
      </div>

      <div class="nav">
        <button id="navDashboard" type="button">
          Dashboard
          <span class="pill live">Live</span>
        </button>

        <button id="navChat" type="button">
          Compliance Guidance
          <span class="pill live">Live</span>
        </button>

        <button id="navFuture" type="button">
          Future Features
          <span class="pill brand">Roadmap</span>
        </button>
      </div>
    </aside>

    <!-- CONTENT -->
    <main class="content">
      <!-- DASHBOARD -->
      <section id="view-dashboard" class="view active">
        <div class="topbar">
          <div class="hero">
            <h2>Raheem AI <span class="pill brand">2026</span></h2>
            <p>
              Raheem AI helps professionals navigate Irish building regulation guidance more efficiently.
              Ask questions in plain language and receive structured responses based on the active Technical Guidance Document,
              with references that support verification and professional judgement.
            </p>
            <div class="quote">The future of construction is clarity, confidence, and compliance.</div>
          </div>

          <div class="auth-top">
            <div class="auth-title">
              <span>Sign in</span>
              <span class="pill brand">Coming</span>
            </div>
            <button class="btn small" type="button" data-soon="Google Sign In">
              <span class="google-badge">G</span>
              Continue with Google
            </button>
            <div class="auth-hint">
              Sign in will enable saved projects, access control, and usage history.
            </div>
          </div>
        </div>

        <div class="section-title">
          <h3>Live</h3>
        </div>

        <div class="grid">
          <article class="card" id="cardCompliance" role="button" tabindex="0">
            <div class="card-head">
              <div class="card-title">
                <div class="icon i-live">CG</div>
                <div>
                  <h4>Compliance Guidance</h4>
                  <p>Ask a question and receive a clear answer with references to review in the selected document.</p>
                </div>
              </div>
              <span class="pill live">Live</span>
            </div>
            <div class="cta">
              <span class="pill brand" id="chipDoc">Select a document</span>
              <button class="btn primary" id="btnOpenChat" type="button">Start</button>
            </div>
          </article>

          <article class="card" id="cardRoadmap" role="button" tabindex="0">
            <div class="card-head">
              <div class="card-title">
                <div class="icon i-early">FF</div>
                <div>
                  <h4>Future Features</h4>
                  <p>Explore planned capabilities including Early Design, DAC, certificates, model review, and energy compliance.</p>
                </div>
              </div>
              <span class="pill brand">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill brand">Future Features</span>
              <button class="btn" id="btnOpenFuture" type="button">View</button>
            </div>
          </article>
        </div>

        <div class="footer">
          <div class="footer-left">
            <span class="pill brand">Raheem AI</span>
            <span class="sep" aria-hidden="true"></span>
            <span>Built 2026</span>
            <span class="sep" aria-hidden="true"></span>
            <span>Abdulraheem Hayder Ahmed · C22310933 · TU Dublin · Architectural Technology</span>
          </div>
          <div class="footer-quote">Designed for real projects and real decisions.</div>
        </div>
      </section>

      <!-- FUTURE FEATURES -->
      <section id="view-future" class="view">
        <div class="hero" style="margin-bottom:14px;">
          <h2>Future Features <span class="pill brand">Roadmap</span></h2>
          <p>
            These capabilities expand Raheem AI from guidance into a complete compliance and certification platform,
            designed for professional workflows and clear outputs that support verification.
          </p>
          <div class="quote">Raheem AI is built to reduce time spent searching and increase confidence in decisions.</div>
        </div>

        <div class="grid">
          <article class="card">
            <div class="card-head">
              <div class="card-title">
                <div class="icon i-early">ED</div>
                <div>
                  <h4>Early Design</h4>
                  <p>Enter your area and requirements. Raheem AI generates multiple basic layout options and you choose what works best.</p>
                </div>
              </div>
              <span class="pill brand">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill brand">Example: 30m2, 2 bed, kitchen</span>
              <button class="btn" type="button" data-soon="Early Design">Preview</button>
            </div>
          </article>

          <article class="card">
            <div class="card-head">
              <div class="card-title">
                <div class="icon i-report">DAC</div>
                <div>
                  <h4>DAC Report Generator</h4>
                  <p>Draft structured DAC reports with key checks aligned to access guidance and project inputs.</p>
                </div>
              </div>
              <span class="pill brand">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill brand">Access and use</span>
              <button class="btn" type="button" data-soon="DAC Report Generator">Preview</button>
            </div>
          </article>

          <article class="card">
            <div class="card-head">
              <div class="card-title">
                <div class="icon i-report">FS</div>
                <div>
                  <h4>Fire Safety Certificate</h4>
                  <p>Structured report drafting, risk checks, and consistent outputs suitable for professional review.</p>
                </div>
              </div>
              <span class="pill brand">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill brand">Fire safety</span>
              <button class="btn" type="button" data-soon="Fire Safety Certificate">Preview</button>
            </div>
          </article>

          <article class="card">
            <div class="card-head">
              <div class="card-title">
                <div class="icon i-bim">BIM</div>
                <div>
                  <h4>Model Review</h4>
                  <p>Upload a model for compliance risks, practical issues, and recommended improvements.</p>
                </div>
              </div>
              <span class="pill brand">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill brand">Revit or IFC</span>
              <button class="btn" type="button" data-soon="Model Review">Preview</button>
            </div>
          </article>

          <article class="card">
            <div class="card-head">
              <div class="card-title">
                <div class="icon i-ber">BER</div>
                <div>
                  <h4>BER and Part L</h4>
                  <p>Energy compliance outputs and clear improvement recommendations based on project inputs.</p>
                </div>
              </div>
              <span class="pill brand">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill brand">Energy</span>
              <button class="btn" type="button" data-soon="BER and Part L">Preview</button>
            </div>
          </article>

          <article class="card">
            <div class="card-head">
              <div class="card-title">
                <div class="icon i-products">SP</div>
                <div>
                  <h4>Manufacturers and Specs</h4>
                  <p>Match products to performance requirements and support specification decisions.</p>
                </div>
              </div>
              <span class="pill brand">Roadmap</span>
            </div>
            <div class="cta">
              <span class="pill brand">Products</span>
              <button class="btn" type="button" data-soon="Manufacturers and Specs">Preview</button>
            </div>
          </article>
        </div>

        <div class="footer">
          <div class="footer-left">
            <span class="pill brand">Raheem AI</span>
            <span class="sep" aria-hidden="true"></span>
            <span>Built 2026</span>
            <span class="sep" aria-hidden="true"></span>
            <span>Abdulraheem Hayder Ahmed · C22310933 · TU Dublin · Architectural Technology</span>
          </div>
          <div class="footer-quote">A compliance platform designed to scale.</div>
        </div>
      </section>

      <!-- CHAT -->
      <section id="view-chat" class="view">
        <div class="chat-shell">
          <div class="chat-top">
            <div>
              <strong>Compliance Guidance</strong><br>
              <span id="chatSub">Using document: none selected</span>
            </div>
            <button class="btn" id="btnBack" type="button">Back</button>
          </div>

          <div class="chat-help">
            <button class="chip" type="button" data-prompt="What are the typical travel distance limits for an office?">Travel distance</button>
            <button class="chip" type="button" data-prompt="What are the key requirements for an accessible WC?">Accessible WC</button>
            <button class="chip" type="button" data-prompt="What are the main requirements for stair widths?">Stairs</button>
            <button class="chip" type="button" data-prompt="What is the difference between compartments and sub-compartments?">Compartmentation</button>
          </div>

          <div class="chat-log" id="chatLog"></div>

          <div class="chat-input">
            <textarea id="chatInput" placeholder="Ask a compliance question... (Enter to send, Shift+Enter for a new line)"></textarea>
            <button class="btn primary" id="btnSend" type="button">Send</button>
          </div>
        </div>
      </section>
    </main>
  </div>

  <!-- Roadmap modal -->
  <div class="modal-backdrop" id="modalBackdrop" aria-hidden="true">
    <div class="modal">
      <h3 id="modalTitle">Future Features</h3>
      <p id="modalBody">This capability is part of the Raheem AI roadmap.</p>
      <div style="display:flex; justify-content:flex-end; gap:10px;">
        <button class="btn" id="btnCloseModal" type="button">Close</button>
      </div>
    </div>
  </div>

  <script>
    const API_BASE = "https://complyr.onrender.com";

    // Views
    const viewDashboard = document.getElementById("view-dashboard");
    const viewFuture = document.getElementById("view-future");
    const viewChat = document.getElementById("view-chat");

    const navDashboard = document.getElementById("navDashboard");
    const navChat = document.getElementById("navChat");
    const navFuture = document.getElementById("navFuture");

    function setNavActive(which){
      navDashboard.classList.toggle("active", which === "dashboard");
      navChat.classList.toggle("active", which === "chat");
      navFuture.classList.toggle("active", which === "future");
    }

    function showView(name){
      viewDashboard.classList.toggle("active", name === "dashboard");
      viewChat.classList.toggle("active", name === "chat");
      viewFuture.classList.toggle("active", name === "future");
      setNavActive(name);

      if(name === "chat"){
        setTimeout(() => document.getElementById("chatInput").focus(), 40);
      }
    }

    function goDash(){ location.hash = "#/"; }
    function openChat(){ location.hash = "#/chat"; }
    function openFuture(){ location.hash = "#/future"; }

    function handleRoute(){
      const h = location.hash || "#/";
      if(h === "#/chat") showView("chat");
      else if(h === "#/future") showView("future");
      else showView("dashboard");
    }
    window.addEventListener("hashchange", handleRoute);
    handleRoute();

    navDashboard.addEventListener("click", goDash);
    navChat.addEventListener("click", openChat);
    navFuture.addEventListener("click", openFuture);

    document.getElementById("btnOpenChat").addEventListener("click", openChat);
    document.getElementById("cardCompliance").addEventListener("click", openChat);
    document.getElementById("cardCompliance").addEventListener("keydown", (e)=>{
      if(e.key === "Enter" || e.key === " ") openChat();
    });

    document.getElementById("btnOpenFuture").addEventListener("click", openFuture);
    document.getElementById("cardRoadmap").addEventListener("click", openFuture);
    document.getElementById("cardRoadmap").addEventListener("keydown", (e)=>{
      if(e.key === "Enter" || e.key === " ") openFuture();
    });

    // Modal
    const modalBackdrop = document.getElementById("modalBackdrop");
    const modalTitle = document.getElementById("modalTitle");
    const modalBody = document.getElementById("modalBody");
    const btnCloseModal = document.getElementById("btnCloseModal");

    function openSoon(name){
      modalTitle.textContent = "Future Features";
      modalBody.textContent = name + " is part of the Raheem AI roadmap and will be available in a future release.";
      modalBackdrop.classList.add("show");
      modalBackdrop.setAttribute("aria-hidden", "false");
      btnCloseModal.focus();
    }
    function closeSoon(){
      modalBackdrop.classList.remove("show");
      modalBackdrop.setAttribute("aria-hidden", "true");
    }
    btnCloseModal.addEventListener("click", closeSoon);
    modalBackdrop.addEventListener("click", (e)=>{ if(e.target === modalBackdrop) closeSoon(); });

    document.querySelectorAll("[data-soon]").forEach(btn=>{
      btn.addEventListener("click", ()=> openSoon(btn.getAttribute("data-soon")));
    });

    // Documents
    const pdfCount = document.getElementById("pdfCount");
    const pdfSelect = document.getElementById("pdfSelect");
    const pdfSearch = document.getElementById("pdfSearch");
    const chatSub = document.getElementById("chatSub");
    const activeDocPill = document.getElementById("activeDocPill");
    const chipDoc = document.getElementById("chipDoc");
    const serviceStatus = document.getElementById("serviceStatus");
    const lastSync = document.getElementById("lastSync");

    let allDocs = [];
    let activePdf = "";

    function setActivePdf(name){
      activePdf = name || "";
      const label = activePdf ? activePdf : "No document selected";
      chatSub.textContent = "Using document: " + (activePdf ? activePdf : "none selected");
      activeDocPill.innerHTML = '<span class="dot"></span>' + label;
      chipDoc.textContent = activePdf ? "Document selected" : "Select a document";
    }

    function sortDocs(list){
      return list.slice().sort((a,b) => a.localeCompare(b, undefined, { sensitivity: "base" }));
    }

    function fillSelect(list){
      pdfSelect.innerHTML = "";
      if(!list.length){
        const opt = document.createElement("option");
        opt.value = "";
        opt.textContent = "No documents available";
        pdfSelect.appendChild(opt);
        setActivePdf("");
        return;
      }

      const sorted = sortDocs(list);

      for(const name of sorted){
        const opt = document.createElement("option");
        opt.value = name;
        opt.textContent = name;
        pdfSelect.appendChild(opt);
      }

      if(activePdf && sorted.includes(activePdf)){
        pdfSelect.value = activePdf;
      } else {
        pdfSelect.value = sorted[0];
        setActivePdf(sorted[0]);
      }
    }

    function setSyncLabel(){
      const d = new Date();
      const t = d.toLocaleTimeString([], {hour:"2-digit", minute:"2-digit"});
      lastSync.textContent = "Updated " + t;
    }

    async function refreshDocs(){
      try{
        const r = await fetch(API_BASE + "/pdfs", { cache: "no-store" });
        if(!r.ok) throw new Error("bad");
        const data = await r.json();
        const list = Array.isArray(data.pdfs) ? data.pdfs : [];

        allDocs = list.slice();
        pdfCount.textContent = "Documents: " + (typeof data.count === "number" ? data.count : list.length);

        serviceStatus.classList.add("ok");
        serviceStatus.classList.remove("warn");
        serviceStatus.innerHTML = '<span class="dot"></span>Service ready';

        setSyncLabel();
        fillSelect(allDocs);
      } catch (e){
        pdfCount.textContent = "Documents: 0";
        serviceStatus.classList.remove("ok");
        serviceStatus.classList.add("warn");
        serviceStatus.innerHTML = '<span class="dot"></span>Service unavailable';
        pdfSelect.innerHTML = '<option value="">Documents unavailable</option>';
        setSyncLabel();
        setActivePdf("");
      }
    }

    pdfSelect.addEventListener("change", ()=> setActivePdf(pdfSelect.value));
    pdfSearch.addEventListener("input", ()=>{
      const q = pdfSearch.value.trim().toLowerCase();
      const filtered = !q ? allDocs : allDocs.filter(n => n.toLowerCase().includes(q));
      fillSelect(filtered);
      if(activePdf && filtered.includes(activePdf)) pdfSelect.value = activePdf;
    });

    refreshDocs();
    setInterval(refreshDocs, 8000);

    // Chat (streaming typing)
    const chatLog = document.getElementById("chatLog");
    const chatInput = document.getElementById("chatInput");
    const btnSend = document.getElementById("btnSend");
    document.getElementById("btnBack").addEventListener("click", goDash);

    document.querySelectorAll("[data-prompt]").forEach(btn=>{
      btn.addEventListener("click", ()=>{
        chatInput.value = btn.getAttribute("data-prompt");
        chatInput.focus();
      });
    });

    // Minimal message store + DOM rendering (smooth streaming updates)
    const messages = [];
    let activeStream = null;

    function stamp(){
      const d = new Date();
      return d.toLocaleTimeString([], {hour:"2-digit", minute:"2-digit"});
    }

    function makeMsg(role, text){
      return { id: "m_" + Math.random().toString(16).slice(2), role, text: text || "", time: stamp() };
    }

    function addMessage(role, text){
      const msg = makeMsg(role, text);
      messages.push(msg);

      const wrap = document.createElement("div");
      wrap.className = "msg " + (role === "user" ? "user" : "assistant");
      wrap.dataset.id = msg.id;

      const bubble = document.createElement("div");
      bubble.className = "bubble";
      bubble.textContent = msg.text;

      const meta = document.createElement("div");
      meta.className = "meta";
      meta.textContent = msg.time;

      const container = document.createElement("div");
      container.appendChild(bubble);
      container.appendChild(meta);

      wrap.appendChild(container);
      chatLog.appendChild(wrap);
      chatLog.scrollTop = chatLog.scrollHeight;

      return msg.id;
    }

    function setMessageText(id, newText){
      const el = chatLog.querySelector('[data-id="' + id + '"] .bubble');
      if(el){
        el.textContent = newText;
        chatLog.scrollTop = chatLog.scrollHeight;
      }
    }

    function setTyping(id, on){
      const el = chatLog.querySelector('[data-id="' + id + '"] .bubble');
      if(!el) return;
      if(on){
        el.innerHTML = '';
        const span = document.createElement("span");
        span.className = "typing";
        span.textContent = "Raheem AI is typing";
        const dots = document.createElement("span");
        dots.className = "dots";
        dots.innerHTML = "<span></span><span></span><span></span>";
        span.appendChild(dots);
        el.appendChild(span);
      } else {
        el.textContent = "";
      }
      chatLog.scrollTop = chatLog.scrollHeight;
    }

    // Initial assistant message
    addMessage("assistant",
      "Welcome to Raheem AI.\n\nSelect an active document on the left, then ask a compliance question in plain language.\nYou will receive a clear answer with references to review in the document."
    );

    function stopActiveStream(){
      try{
        if(activeStream){
          activeStream.close();
          activeStream = null;
        }
      } catch(e){}
    }

    function buildStreamUrl(question){
      const params = new URLSearchParams();
      params.set("q", question);
      params.set("pdf", activePdf);
      // Stream endpoint from your new backend
      return API_BASE + "/ask_stream?" + params.toString();
    }

    async function send(){
      const raw = chatInput.value.trim();
      if(!raw) return;

      if(!activePdf){
        addMessage("assistant", "Please select an active document first.");
        return;
      }

      stopActiveStream();

      addMessage("user", raw);
      chatInput.value = "";

      // Create assistant message and show typing indicator
      const assistantId = addMessage("assistant", "");
      setTyping(assistantId, true);

      // Start SSE stream
      const url = buildStreamUrl(raw);
      let buffer = "";

      try{
        activeStream = new EventSource(url);

        activeStream.addEventListener("meta", (e) => {
          // Optional: could display pages/vision used later
        });

        activeStream.addEventListener("error", () => {
          stopActiveStream();
          setMessageText(assistantId, "The service is currently unavailable. Please try again in a moment.");
        });

        activeStream.addEventListener("done", () => {
          stopActiveStream();
          // Final polish: trim
          setMessageText(assistantId, buffer.trim() || "No response available.");
        });

        // default "message" event gives us chunks
        activeStream.onmessage = (e) => {
          const chunk = (e.data || "").replaceAll("\\n", "\n");
          if(!buffer){
            // remove typing indicator the moment first token arrives
            setTyping(assistantId, false);
          }
          buffer += chunk;
          setMessageText(assistantId, buffer);
        };

      } catch(err){
        stopActiveStream();
        setMessageText(assistantId, "The service is currently unavailable. Please try again in a moment.");
      }
    }

    btnSend.addEventListener("click", send);
    chatInput.addEventListener("keydown", (e)=>{
      if(e.key === "Enter" && !e.shiftKey){
        e.preventDefault();
        send();
      }
    });
  </script>
</body>
</html>
